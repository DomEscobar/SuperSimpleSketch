!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SusiDraw=e():n.SusiDraw=e()}("undefined"!=typeof self?self:this,(function(){return function(n){var e={};function t(l){if(e[l])return e[l].exports;var c=e[l]={i:l,l:!1,exports:{}};return n[l].call(c.exports,c,c.exports,t),c.l=!0,c.exports}return t.m=n,t.c=e,t.d=function(n,e,l){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:l})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var c in n)t.d(l,c,function(e){return n[e]}.bind(null,c));return l},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="/",t(t.s=4)}([function(module,exports,__webpack_require__){eval("var content = __webpack_require__(1);\n\nif (typeof content === 'string') {\n  content = [[module.i, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = __webpack_require__(3)(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1N1c2lEcmF3Ly4vc3JjL3Njc3Mvc3R5bGVzLnNjc3M/ZGY3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGVzLnNjc3NcIik7XG5cbmlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xufVxuXG52YXIgb3B0aW9ucyA9IHt9XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmIChjb250ZW50LmxvY2Fscykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(2)(false);\n// Module\nexports.push([module.i, "", ""]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1N1c2lEcmF3Ly4vc3JjL3Njc3Mvc3R5bGVzLnNjc3M/NmIyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKShmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIlwiLCBcIlwiXSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return "@media ".concat(item[2], "{").concat(content, "}");\n      }\n\n      return content;\n    }).join(\'\');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === \'string\') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \'\']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = "(".concat(item[2], ") and (").concat(mediaQuery, ")");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || \'\'; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === \'function\') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return "/*# sourceURL=".concat(cssMapping.sourceRoot).concat(source, " */");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\'\\n\');\n  }\n\n  return [content].join(\'\\n\');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);\n  return "/*# ".concat(data, " */");\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1N1c2lEcmF3Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcz8yNGZiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwie1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBtb2R1bGVzW19pXTsgLy8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuICAgICAgLy8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcbiAgICAgIC8vIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cbiAgICAgIC8vIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcblxuICAgICAgaWYgKGl0ZW1bMF0gPT0gbnVsbCB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBpZiAobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2UgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCIoXCIuY29uY2F0KGl0ZW1bMl0sIFwiKSBhbmQgKFwiKS5jb25jYXQobWVkaWFRdWVyeSwgXCIpXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar stylesInDom = {};\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nfunction listToStyles(list, options) {\n  var styles = [];\n  var newStyles = {};\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var css = item[1];\n    var media = item[2];\n    var sourceMap = item[3];\n    var part = {\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    };\n\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = {\n        id: id,\n        parts: [part]\n      });\n    } else {\n      newStyles[id].parts.push(part);\n    }\n  }\n\n  return styles;\n}\n\nfunction addStylesToDom(styles, options) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i];\n    var domStyle = stylesInDom[item.id];\n    var j = 0;\n\n    if (domStyle) {\n      domStyle.refs++;\n\n      for (; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j]);\n      }\n\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j], options));\n      }\n    } else {\n      var parts = [];\n\n      for (; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j], options));\n      }\n\n      stylesInDom[item.id] = {\n        id: item.id,\n        refs: 1,\n        parts: parts\n      };\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n\n  if (typeof options.attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : undefined;\n\n    if (nonce) {\n      options.attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(options.attributes).forEach(function (key) {\n    style.setAttribute(key, options.attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  options.attributes = typeof options.attributes === 'object' ? options.attributes : {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  var styles = listToStyles(list, options);\n  addStylesToDom(styles, options);\n  return function update(newList) {\n    var mayRemove = [];\n\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i];\n      var domStyle = stylesInDom[item.id];\n\n      if (domStyle) {\n        domStyle.refs--;\n        mayRemove.push(domStyle);\n      }\n    }\n\n    if (newList) {\n      var newStyles = listToStyles(newList, options);\n      addStylesToDom(newStyles, options);\n    }\n\n    for (var _i = 0; _i < mayRemove.length; _i++) {\n      var _domStyle = mayRemove[_i];\n\n      if (_domStyle.refs === 0) {\n        for (var j = 0; j < _domStyle.parts.length; j++) {\n          _domStyle.parts[j]();\n        }\n\n        delete stylesInDom[_domStyle.id];\n      }\n    }\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1N1c2lEcmF3Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzPzJkYmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlcyA9IFtdO1xuICB2YXIgbmV3U3R5bGVzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjc3MgPSBpdGVtWzFdO1xuICAgIHZhciBtZWRpYSA9IGl0ZW1bMl07XG4gICAgdmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG4gICAgdmFyIHBhcnQgPSB7XG4gICAgICBjc3M6IGNzcyxcbiAgICAgIG1lZGlhOiBtZWRpYSxcbiAgICAgIHNvdXJjZU1hcDogc291cmNlTWFwXG4gICAgfTtcblxuICAgIGlmICghbmV3U3R5bGVzW2lkXSkge1xuICAgICAgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBwYXJ0czogW3BhcnRdXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuICAgIHZhciBqID0gMDtcblxuICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgZG9tU3R5bGUucmVmcysrO1xuXG4gICAgICBmb3IgKDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG5cbiAgICAgIHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge1xuICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgcmVmczogMSxcbiAgICAgICAgcGFydHM6IHBhcnRzXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIG9wdGlvbnMuYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKG9wdGlvbnMuYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgb3B0aW9ucy5hdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMuYXR0cmlidXRlcyA9IHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMgPT09ICdvYmplY3QnID8gb3B0aW9ucy5hdHRyaWJ1dGVzIDoge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgdmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcbiAgYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgdmFyIG1heVJlbW92ZSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cbiAgICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgICBkb21TdHlsZS5yZWZzLS07XG4gICAgICAgIG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3TGlzdCkge1xuICAgICAgdmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcbiAgICAgIGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1heVJlbW92ZS5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfZG9tU3R5bGUgPSBtYXlSZW1vdmVbX2ldO1xuXG4gICAgICBpZiAoX2RvbVN0eWxlLnJlZnMgPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBfZG9tU3R5bGUucGFydHNbal0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzdHlsZXNJbkRvbVtfZG9tU3R5bGUuaWRdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./src/scss/styles.scss\nvar styles = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/lib/user-list.js\n// Your JS Code goes here\nclass SusiDraw {\n  constructor() {\n    initPalette();\n    initStrokePalette();\n  }\n\n  export() {\n    var dataURL = stage.toDataURL({\n      pixelRatio: 3\n    });\n    return dataURL;\n  }\n\n  clear() {\n    user_list_layer.clear();\n    user_list_layer.destroyChildren();\n  }\n\n}\nvar brushSize = 2;\nvar strokeColor = '#000000';\nvar fillColor = '#000000';\nvar pointerPaletteElement;\nvar pointer = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABOklEQVRYw8XSMUrEQBTG8e8lQVKKZ7DwCjYpkjwvIBZbiWBh4QX2DttZeA3ZZmEmBLERW2uxFCsLC7EIM1bTyLI7k7zJvDJk8/1Y/sC/U0rd931/gJku2/LsZhiGTdd1R6kAAFAbY1601iepAABwbK191lqfpQIAwKG1dqOUuk0FcO/cxYrTB+AuSpwhACBCnKEAQDjOMQBAMM6xAPfbyXFOAbibFKcEAJgQpxQAGBmnJAAYEac0wH3TO84YAHdeccYEAB5xxgYAe+KcAwDsiLMY8bHXPM9Pm6b5kZCF/gPfRHQuNR4MIKJLZn6TGg8FrJj5QXI8BPBUFMVSetwX8ElEi7quhxQAQ0QLZv6IMe4DWDLzY6zxfYB1WZarmOO7AO9Zll1VVWVSAH6J6KJt26/Y41tPKXU9594fF9eZJw0buvgAAAAASUVORK5CYII=';\nvar pencil = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABJUlEQVRYw8XWPU7DMBTA8f+zOEIH1EMw8DWyxM4VOBhXYYu7MELpwFBuUDH0DDELqRLVofl4jt8YWfr99eJIERJOVVU3IYQXEXl2zv3EzpjE+AZ4CiFsvPfXsXOSGF+1Hu+NMYW1trMJ9YAevDdCNeACHo1QCxiIn0WoBIzEOxGzAybizbzNCpiJH0Vk+gY0cOfc16QALRwmfAWa+OgAbXxUQAp8cEAqfFBASvxiQGr834AlcOj5IZmLA4Pw6AY08LIsB+FnAUvjnYAc+CnAe7+q6/p7aRz+LmEI4TEH3g64z4GfAoCHHHg74DYHDmC892tgnQMHMCPevzreBNzlwgGugNgGDsAW+BSRrYi8W2uP2ngTsAZegZ2IfBhjdkVRHFJgsfkF/bf6hQHP7tUAAAAASUVORK5CYII=';\nvar rectangle = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAZUlEQVRYw+3XsRGAMAxD0R+OMTIIQ7iEKWk1RAZhD2gocgxgU8iVO707VWqSbgpvqQwHWKf/AkZS7gb0L2BExJGRLukEdvhBBQYYYIABBhhggAEGGGCAAW0ap+XTrPPOpcwrr+ABWgEQB6eoeI4AAAAASUVORK5CYII=';\nvar user_list_text = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABC0lEQVRYw+2WMUrEQBiFvw0DIa2H2CoXEMsQmGIqcfUQCoJsZ+UFPIA3WF27KVKm2WIaK7Fw9whiN11YbEaQEE1md91t/gfT/O/xv4+QgRkRZK09B2bsRxfGmEeAZE+Fv0oA1B/eg1LqVmv90TastU/AWWs8N8ZM2tmqqo6aprkDrmK+wFuappdd5bHSWn9mWXYNvMQAzMuybLYt/1ZRFGvgOQZguavyH1p1DUebbIr5B/p08FsgAAIgAAIgAAIgAAKwKUAycLZ7gLquEyDvsPLg/R+Acy7x3k+BcYc99t5PnXNROwc9Sq21N8BJKM574q/AO7Awxtz37VZ9gaBj4HRgNg9nPSR88FvwBaf1PokNJIXwAAAAAElFTkSuQmCC';\nvar arrow = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAvUlEQVRYw+2WQQ7CIBBFZ4hHMB4Kdi68g+nJNNHVwE16iaZnADdqjCWWAjPEhLdv+/4rTQrQ6fw71tpTyfWqVCCEcCGim3Pu0ETgydF7P+bUqCUAALDPqVFTIKsGh8CmGlwCyTWQiAKzxIu7UuqstZ4kC6zWkBQAiJwNyVfwzYyIg3SBBbtGz30fSGmBGREHY8y1RYHoZ4ild004xIvVn3AXiK6WEPi5mltgdTWXQPJqDoFNq6tS+lPa6TTnAUDfae1KfyilAAAAAElFTkSuQmCC';\n\nconst loadGoogleMaps = callback => {\n  const existingScript = document.getElementById('acolorpickerjs');\n\n  if (!existingScript) {\n    const script = document.createElement('script');\n    script.src = 'http://nokol.net/cdn/acolorpicker.js';\n    script.id = 'acolorpickerjs';\n    document.body.appendChild(script);\n\n    script.onload = () => {\n      if (callback) callback();\n    };\n  }\n\n  if (existingScript && callback) callback();\n};\n\nfunction clearSelectedPalette() {\n  document.getElementsByClassName('susi-pallette-item-selected')[0].classList.remove('susi-pallette-item-selected');\n}\n\nfunction drawSelectedPalette(element) {\n  clearSelectedPalette();\n  if (element.classList.contains('susi-pallette-item-selected')) return;\n  element.classList.add('susi-pallette-item-selected');\n}\n\nfunction initPalette() {\n  pointerPaletteElement = addPaletteItem(pointer, function (e) {\n    drawSelectedPalette(e.target);\n    setMode('pointer');\n  }, 'susi-pallette-item-selected');\n  addPaletteItem(pencil, function (e) {\n    drawSelectedPalette(e.target);\n    setMode('brush');\n  });\n  addPaletteItem(user_list_text, function (e) {\n    drawSelectedPalette(e.target);\n    selectTmpElement('text');\n  });\n  addPaletteItem(rectangle, function (e) {\n    drawSelectedPalette(e.target);\n    selectTmpElement('rect');\n  });\n  addPaletteItem(arrow, function (e) {\n    drawSelectedPalette(e.target);\n    selectTmpElement('arrow');\n  });\n}\n\nfunction initStrokePalette() {\n  var brushSize = document.createElement('div');\n  brushSize.id = 'brushSize';\n  brushSize.classList.add('susi-palette-color');\n  brushSize.style.borderRadius = '50%';\n  brushSize.style.backgroundColor = strokeColor;\n  var paletteItem = document.createElement('div');\n  paletteItem.classList.add('susi-palette-item');\n\n  var clickcallback = function () {\n    toggleStrokePicker();\n  };\n\n  var strokeCHanger = document.createElement('input');\n  strokeCHanger.type = 'range';\n  strokeCHanger.style.position = 'absolute';\n  strokeCHanger.style.right = '5px';\n  strokeCHanger.id = 'strokeSize';\n  strokeCHanger.style.display = 'none';\n  strokeCHanger.addEventListener('change', function (e) {\n    setStrokeSize(strokeCHanger.value);\n  });\n  paletteItem.appendChild(brushSize);\n  paletteItem.appendChild(strokeCHanger);\n  brushSize.addEventListener('click', clickcallback);\n  brushSize.addEventListener('touchstart', clickcallback);\n  document.getElementById('susi-general').appendChild(paletteItem); //---Stroke color -----\n\n  var strokeColorItem = document.createElement('div');\n  strokeColorItem.classList.add('susi-palette-item');\n  strokeColorItem.classList.add('susi-palette-color');\n  strokeColorItem.id = 'color';\n\n  var clickcallbackItem = function () {\n    openPicker(true);\n  };\n\n  strokeColorItem.addEventListener('click', clickcallbackItem);\n  strokeColorItem.addEventListener('touchstart', clickcallbackItem);\n  strokeColorItem.style.backgroundColor = strokeColor;\n  document.getElementById('susi-general').appendChild(strokeColorItem); //---outline color -----\n\n  var outlineColorItem = document.createElement('div');\n  outlineColorItem.classList.add('susi-palette-item');\n  outlineColorItem.classList.add('susi-palette-color');\n  outlineColorItem.classList.add('susi-palette-colorOuter');\n  outlineColorItem.id = 'outerColor';\n\n  var clickcallbackOutline = function () {\n    openPicker(false);\n  };\n\n  outlineColorItem.addEventListener('click', clickcallbackOutline);\n  outlineColorItem.addEventListener('touchstart', clickcallbackOutline);\n  document.getElementById('susi-general').appendChild(outlineColorItem);\n}\n\nfunction addPaletteItem(imgsrc, clickcallback, styleName) {\n  var imgElement = document.createElement('img');\n  imgElement.src = imgsrc;\n  var paletteItem = document.createElement('div');\n  paletteItem.classList.add('susi-palette-item');\n\n  if (styleName) {\n    paletteItem.classList.add(styleName);\n  }\n\n  paletteItem.appendChild(imgElement);\n  document.getElementById('palette').appendChild(paletteItem);\n  paletteItem.addEventListener('click', clickcallback);\n  paletteItem.addEventListener('touchstart', clickcallback);\n  return paletteItem;\n} //------------\n\n\nvar isStrokeColor = true;\nvar picker;\nvar isPickerVisible;\nvar isStrokePickerVisible = true;\n\nfunction setStrokeSize(value) {\n  brushSize = value;\n  document.getElementById('brushSize').firstElementChild.innerText = value;\n}\n\nfunction toggleStrokePicker() {\n  isStrokePickerVisible = !isStrokePickerVisible;\n  document.getElementById('strokeSize').style.display = isStrokePickerVisible ? 'block' : 'none';\n}\n\nfunction openPicker(isColor) {\n  isStrokeColor = isColor;\n  console.log('toggle');\n  picker.toggle();\n  picker.color = isColor ? document.getElementById('color').style.background : document.getElementById('outerColor').style.color;\n}\n\nloadGoogleMaps(() => {\n  picker = AColorPicker.createPicker('.picker').on('change', (picker, color) => {\n    if (isStrokeColor) {\n      strokeColor = color;\n      document.getElementById('color').style.background = color;\n    } else {\n      fillColor = color;\n      document.getElementById('outerColor').style.color = color;\n    }\n  });\n  picker.hide();\n});\nvar width = document.getElementById('container').getBoundingClientRect().width;\nvar height = document.getElementById('container').getBoundingClientRect().height;\nvar isPaint = false;\nvar mode = 'brush';\nvar lastLine;\nvar x1, y1, x2, y2; // pointer selection\n\nvar clickedType;\nvar clickedElement;\nvar clickedTmpDropElement;\nvar tmpDropElement;\nvar tmpX, tmpY;\nvar transformer;\nvar draggable;\nvar user_list_images = [];\nvar selectedimg;\nvar stage = new Konva.Stage({\n  container: 'container',\n  width: width,\n  height: height\n});\nvar user_list_layer = new Konva.Layer();\nstage.add(user_list_layer);\nuser_list_images.push('http://nokol.net/icon/girl-icon.png');\nuser_list_images.push('http://nokol.net/icon/kid-icon.png');\nuser_list_images.push('http://nokol.net/icon/friends-icon.png');\nuser_list_images.push('http://nokol.net/icon/boys-icon.png');\nsetImageIcons();\n\nfunction setImageIcons() {\n  var i;\n\n  for (i = 0; i < user_list_images.length; i++) {\n    var imgElement = document.createElement('img');\n    imgElement.src = user_list_images[i];\n    imgElement.style.width = '32px';\n    imgElement.addEventListener('click', function (e) {\n      selectTmpElement('image');\n      selectedimg = e.target.src;\n    });\n    document.getElementById('images-container').appendChild(imgElement);\n  }\n}\n\nfunction setMode(_mode) {\n  mode = _mode;\n  deselectElement();\n\n  if (transformer) {\n    transformer.remove();\n  }\n\n  if (mode == 'pointer') {\n    drawSelectedPalette(pointerPaletteElement);\n    transformer = new Konva.Transformer();\n    user_list_layer.add(transformer);\n    user_list_layer.batchDraw();\n  }\n}\n\nfunction deselectDraggable() {\n  if (!draggable) {\n    return;\n  }\n\n  draggable.draggable(false);\n  draggable = null;\n}\n\nfunction deselectElement() {\n  clickedTmpDropElement = null;\n  clickedElement = null;\n}\n\nfunction selectTmpElement(element) {\n  clickedTmpDropElement = element;\n  clickedElement = element;\n}\n\nfunction dropTmpElement(type) {\n  clickedType = type;\n\n  if (type === 'image') {\n    addImage(selectedimg);\n  }\n\n  if (type === 'rect') {\n    drawRect();\n  }\n\n  if (type === 'arrow') {\n    drawArrow();\n  }\n\n  if (type === 'text') {\n    drawtext();\n  }\n\n  clickedTmpDropElement = null;\n  user_list_layer.draw();\n}\n\nfunction drawtext() {\n  var textNode = new Konva.Text({\n    text: 't',\n    x: stage.getPointerPosition().x,\n    y: stage.getPointerPosition().y,\n    fontSize: 20,\n    fill: strokeColor,\n    draggable: false,\n    width: 100,\n    name: 'rect'\n  });\n  textNode.on('transform', function () {\n    // reset scale, so only with is changing by transformer\n    textNode.setAttrs({\n      width: textNode.width() * textNode.scaleX(),\n      height: textNode.height() * textNode.scaleY(),\n      scaleX: 1,\n      scaleY: 1\n    });\n  });\n  setMode('pointer');\n  addHandler(textNode);\n  user_list_layer.add(textNode);\n  user_list_layer.draw();\n  setTimeout(function () {\n    setTextWriteable(textNode);\n  }, 200);\n}\n\nfunction drawRect() {\n  var rect2 = new Konva.Rect({\n    x: stage.getPointerPosition().x,\n    y: stage.getPointerPosition().y,\n    width: 10,\n    height: 10,\n    fill: strokeColor,\n    stroke: fillColor,\n    name: 'rect',\n    draggable: false\n  });\n  tmpDropElement = rect2;\n  user_list_layer.add(rect2);\n  user_list_layer.draw();\n}\n\nfunction drawArrow() {\n  var arrow = new Konva.Arrow({\n    x: stage.getPointerPosition().x,\n    y: stage.getPointerPosition().y,\n    points: [0, 0, 1, 1],\n    pointerLength: 10,\n    pointerWidth: 10,\n    fill: strokeColor,\n    stroke: strokeColor,\n    strokeWidth: brushSize,\n    name: 'rect',\n    draggable: false\n  });\n  tmpDropElement = arrow;\n  user_list_layer.add(arrow);\n  user_list_layer.draw();\n}\n\nfunction addImage(src) {\n  var imageObj = new Image();\n  imageObj.crossOrigin = 'Anonymous';\n\n  imageObj.onload = function () {\n    drawImage(this);\n  };\n\n  imageObj.src = src;\n}\n\nfunction drawPointerSelection() {\n  x1 = stage.getPointerPosition().x;\n  y1 = stage.getPointerPosition().y;\n  x2 = stage.getPointerPosition().x;\n  y2 = stage.getPointerPosition().y;\n  selectionRectangle.visible(true);\n  selectionRectangle.width(0);\n  selectionRectangle.height(0);\n  user_list_layer.draw();\n}\n\nfunction drawLine() {\n  isPaint = true;\n  var pos = stage.getPointerPosition();\n  lastLine = new Konva.Line({\n    stroke: strokeColor,\n    strokeWidth: brushSize,\n    name: 'rect',\n    globalCompositeOperation: 'source-over',\n    points: [pos.x, pos.y]\n  });\n  user_list_layer.add(lastLine);\n}\n\nfunction drawImage(imageObj) {\n  var darthVaderImg = new Konva.Image({\n    image: imageObj,\n    x: stage.getPointerPosition().x,\n    y: stage.getPointerPosition().y,\n    width: 10,\n    height: 10,\n    name: 'rect',\n    draggable: false\n  });\n  tmpDropElement = darthVaderImg;\n  user_list_layer.add(darthVaderImg);\n  user_list_layer.draw();\n}\n\nfunction clickOnElement(element) {\n  setMode('pointer');\n  transformer.nodes([element]);\n  deselectDraggable();\n  element.draggable(true);\n  draggable = element;\n}\n\nuser_list_layer.draw();\nvar selectionRectangle = new Konva.Rect({\n  fill: 'rgba(0,0,255,0.5)'\n});\nuser_list_layer.add(selectionRectangle);\nstage.on('keypress', e => {\n  var e;\n  if (!e) e = window.event;\n  var keyCode = e.keyCode;\n\n  if (keyCode == '27') {// TODO \n  }\n});\nstage.on('mousedown touchstart', e => {\n  if (clickedTmpDropElement) {\n    tmpX = stage.getPointerPosition().x;\n    tmpY = stage.getPointerPosition().y;\n    dropTmpElement(clickedTmpDropElement);\n    return;\n  }\n\n  if (mode === \"brush\") {\n    drawLine();\n  }\n\n  if (mode === \"pointer\") {\n    // do nothing if we mousedown on eny shape\n    if (e.target !== stage) {\n      return;\n    }\n\n    drawPointerSelection();\n  }\n});\nstage.on('mousemove touchmove', () => {\n  x2 = stage.getPointerPosition().x;\n  y2 = stage.getPointerPosition().y;\n\n  if (tmpDropElement) {\n    var newWidth = x2 - tmpX;\n    var newHeight = y2 - tmpY;\n\n    if (clickedType === 'arrow') {\n      tmpDropElement.points([0, 0, newWidth, newHeight]);\n    } else {\n      tmpDropElement.width(newWidth);\n      tmpDropElement.height(newHeight);\n    }\n\n    user_list_layer.batchDraw();\n    return;\n  } // no nothing if we didn't start selection\n\n\n  if (!selectionRectangle.visible()) {\n    if (isPaint) {\n      const pos = stage.getPointerPosition();\n      var newPoints = lastLine.points().concat([pos.x, pos.y]);\n      lastLine.points(newPoints);\n      user_list_layer.batchDraw();\n    }\n\n    return;\n  }\n\n  selectionRectangle.setAttrs({\n    x: Math.min(x1, x2),\n    y: Math.min(y1, y2),\n    width: Math.abs(x2 - x1),\n    height: Math.abs(y2 - y1)\n  });\n  user_list_layer.batchDraw();\n});\nstage.on('mouseup touchend', () => {\n  if (tmpDropElement) {\n    clickOnElement(tmpDropElement);\n    tmpDropElement = null;\n  } // no nothing if we didn't start selection\n\n\n  if (!selectionRectangle.visible()) {\n    isPaint = false;\n    return;\n  } // update visibility in timeout, so we can check it in click event\n\n\n  setTimeout(() => {\n    selectionRectangle.visible(false);\n    user_list_layer.batchDraw();\n  });\n  var shapes = stage.find('.rect').toArray();\n  var box = selectionRectangle.getClientRect();\n  var selected = shapes.filter(shape => Konva.Util.haveIntersection(box, shape.getClientRect()));\n\n  if (transformer) {\n    transformer.nodes(selected);\n  }\n\n  user_list_layer.batchDraw();\n}); // clicks should select/deselect shaps\n\nstage.on('click tap', function (e) {\n  // if we are selecting with rect, do nothing\n  if (selectionRectangle.visible()) {\n    return;\n  } // if click on empty area - remove all selections\n\n\n  if (e.target === stage && transformer) {\n    transformer.nodes([]);\n    deselectDraggable();\n    user_list_layer.draw();\n    return;\n  } // do nothing if clicked NOT on our rectangles\n\n\n  if (!e.target.hasName('rect')) {\n    return;\n  } // do we pressed shift or ctrl?\n\n\n  const metaPressed = e.evt.shiftKey || e.evt.ctrlKey || e.evt.metaKey;\n  const isSelected = transformer && transformer.nodes() && transformer.nodes().indexOf(e.target) >= 0;\n\n  if (!metaPressed && !isSelected && transformer) {\n    // if no key pressed and the node is not selected\n    // select just one\n    clickOnElement(e.target);\n  } else if (metaPressed && isSelected) {\n    // if we pressed keys and node was selected\n    // we need to remove it from selection:\n    const nodes = transformer.nodes().slice(); // use slice to have new copy of array\n    // remove node from array\n\n    nodes.splice(nodes.indexOf(e.target), 1);\n    transformer.nodes(nodes);\n  }\n\n  user_list_layer.draw();\n}); //----- TEXT ---------\n\nfunction addHandler(textNode) {\n  textNode.on('dblclick tap', () => {\n    setTextWriteable(textNode);\n  });\n} // ---- Text writeable\n\n\nfunction setTextWriteable(textNode) {\n  textNode.hide();\n  user_list_layer.draw(); // create textarea over canvas with absolute position\n\n  var textPosition = textNode.absolutePosition();\n  var stageBox = stage.container().getBoundingClientRect();\n  var areaPosition = {\n    x: stageBox.left + textPosition.x,\n    y: stageBox.top + textPosition.y\n  };\n  var textarea = document.createElement('textarea');\n  document.body.appendChild(textarea);\n  textarea.value = textNode.text();\n  textarea.style.position = 'absolute';\n  textarea.style.top = areaPosition.y + 'px';\n  textarea.style.left = areaPosition.x + 'px';\n  textarea.style.width = textNode.width() - textNode.padding() * 2 + 'px';\n  textarea.style.height = textNode.height() - textNode.padding() * 2 + 5 + 'px';\n  textarea.style.fontSize = textNode.fontSize() + 'px';\n  textarea.style.border = 'none';\n  textarea.style.padding = '0px';\n  textarea.style.margin = '0px';\n  textarea.style.overflow = 'hidden';\n  textarea.style.background = 'none';\n  textarea.style.zIndex = 2;\n  textarea.style.outline = 'none';\n  textarea.style.color = fillColor;\n  textarea.style.resize = 'none';\n  textarea.style.lineHeight = textNode.lineHeight();\n  textarea.style.fontFamily = textNode.fontFamily();\n  textarea.style.transformOrigin = 'left top';\n  textarea.style.textAlign = textNode.align();\n  textarea.style.color = textNode.fill();\n  rotation = textNode.rotation();\n  var transform = '';\n\n  if (rotation) {\n    transform += 'rotateZ(' + rotation + 'deg)';\n  }\n\n  var px = 0;\n  var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\n  if (isFirefox) {\n    px += 2 + Math.round(textNode.fontSize() / 20);\n  }\n\n  transform += 'translateY(-' + px + 'px)';\n  textarea.style.transform = transform;\n  textarea.style.height = 'auto';\n  textarea.style.height = textarea.scrollHeight + 3 + 'px';\n  textarea.focus();\n\n  function removeTextarea() {\n    textarea.parentNode.removeChild(textarea);\n    window.removeEventListener('click', handleOutsideClick);\n    textNode.show();\n    transformer.forceUpdate();\n    user_list_layer.draw();\n  }\n\n  function setTextareaWidth(newWidth) {\n    if (!newWidth) {\n      // set width for placeholder\n      newWidth = textNode.placeholder.length * textNode.fontSize();\n    } // some extra fixes on different browsers\n\n\n    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\n    if (isSafari || isFirefox) {\n      newWidth = Math.ceil(newWidth);\n    }\n\n    var isEdge = document.documentMode || /Edge/.test(navigator.userAgent);\n\n    if (isEdge) {\n      newWidth += 1;\n    }\n\n    textarea.style.width = newWidth + 'px';\n  }\n\n  textarea.addEventListener('keydown', function (e) {\n    // hide on enter\n    // but don't hide on shift + enter\n    if (e.keyCode === 13 && !e.shiftKey) {\n      textNode.text(textarea.value);\n      removeTextarea();\n    } // on esc do not set value back to node\n\n\n    if (e.keyCode === 27) {\n      removeTextarea();\n    }\n  });\n  textarea.addEventListener('keydown', function (e) {\n    scale = textNode.getAbsoluteScale().x;\n    setTextareaWidth(textNode.width() * scale);\n    textarea.style.height = 'auto';\n    textarea.style.height = textarea.scrollHeight + textNode.fontSize() + 'px';\n  });\n\n  function handleOutsideClick(e) {\n    if (e.target !== textarea) {\n      textNode.text(textarea.value);\n      removeTextarea();\n    }\n  }\n\n  setTimeout(() => {\n    window.addEventListener('click', handleOutsideClick);\n  });\n}\n// CONCATENATED MODULE: ./src/index.js\n// import `.scss` files\n // import UserList class\n\n // export default UserList class\n// I used `defaultExport` to state that variable name doesn't matter\n\n/* harmony default export */ var src = __webpack_exports__[\"default\"] = (SusiDraw);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1N1c2lEcmF3Ly4vc3JjL2xpYi91c2VyLWxpc3QuanM/OWEwZSIsIndlYnBhY2s6Ly9TdXNpRHJhdy8uL3NyYy9pbmRleC5qcz9iNjM1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFlvdXIgSlMgQ29kZSBnb2VzIGhlcmVcclxuZXhwb3J0IGNsYXNzIFN1c2lEcmF3IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGluaXRQYWxldHRlKClcclxuICAgICAgICBpbml0U3Ryb2tlUGFsZXR0ZSgpXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0KCkge1xyXG4gICAgICAgIHZhciBkYXRhVVJMID0gc3RhZ2UudG9EYXRhVVJMKHsgcGl4ZWxSYXRpbzogMyB9KTtcclxuICAgICAgICByZXR1cm4gZGF0YVVSTDtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICBsYXllci5jbGVhcigpXHJcbiAgICAgICAgbGF5ZXIuZGVzdHJveUNoaWxkcmVuKClcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbnZhciBicnVzaFNpemUgPSAyXHJcblxyXG52YXIgc3Ryb2tlQ29sb3IgPSAnIzAwMDAwMCdcclxudmFyIGZpbGxDb2xvciA9ICcjMDAwMDAwJ1xyXG5cclxudmFyIHBvaW50ZXJQYWxldHRlRWxlbWVudDtcclxudmFyIHBvaW50ZXIgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FZQUFBQnplbnIwQUFBQUNYQklXWE1BQUE3RUFBQU94QUdWS3c0YkFBQUJPa2xFUVZSWXc4WFNNVXJFUUJURzhlOGxRVktLWjdEd0NqWXBrand2SUJaYmlXQmg0UVgyRHR0WmVBM1pabUVtQkxFUlcydXhGQ3NMQzdFSU0xYlR5TEk3azd6SnZESms4LzFZL3NDL1UwcmQ5MzEvZ0prdTIvTHNaaGlHVGRkMVI2a0FBRkFiWTE2MDFpZXBBQUJ3YksxOTFscWZwUUlBd0tHMWRxT1V1azBGY08vY3hZclRCK0F1U3B3aEFDQkNuS0VBUURqT01RQkFNTTZ4QVBmYnlYRk9BYmliRktjRUFKZ1FweFFBR0JtbkpBQVlFYWMwd0gzVE84NFlBSGRlY2NZRUFCNXh4Z1lBZStLY0F3RHNpTE1ZOGJIWFBNOVBtNmI1a1pDRi9nUGZSSFF1TlI0TUlLSkxabjZUR2c4RnJKajVRWEk4QlBCVUZNVlNldHdYOEVsRWk3cXVoeFFBUTBRTFp2NklNZTREV0RMelk2enhmWUIxV1phcm1PTzdBTzlabGwxVlZXVlNBSDZKNktKdDI2L1k0MXRQS1hVOTU5NGZGOWVaSncwYnV2Z0FBQUFBU1VWT1JLNUNZSUk9J1xyXG5cclxudmFyIHBlbmNpbCA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNBQUFBQWdDQVlBQUFCemVucjBBQUFBQ1hCSVdYTUFBQTdFQUFBT3hBR1ZLdzRiQUFBQkpVbEVRVlJZdzhYV1BVN0RNQlRBOGYrek9FSUgxRU13OERXeXhNNFZPQmhYWVl1N01FTHB3RkJ1VURIMERERUxxUkxWb2ZsNGp0OFlXZnI5OWVKSUVSSk9WVlUzSVlRWEVYbDJ6djNFenBqRStBWjRDaUZzdlBmWHNYT1NHRisxSHUrTk1ZVzF0ck1KOVlBZXZEZENOZUFDSG8xUUN4aUluMFdvQkl6RU94R3pBeWJpemJ6TkNwaUpIMFZrK2dZMGNPZmMxNlFBTFJ3bWZBV2ErT2dBYlh4VVFBcDhjRUFxZkZCQVN2eGlRR3I4MzRBbGNPajVJWm1MQTRQdzZBWTA4TElzQitGbkFVdmpuWUFjK0NuQWU3K3E2L3A3YVJ6K0xtRUk0VEVIM2c2NHo0R2ZBb0NISEhnNzREWUhEbUM4OTJ0Z25RTUhNQ1BldnpyZUJOemx3Z0d1Z05nR0RzQVcrQlNScllpOFcydVAybmdUc0FaZWdaMklmQmhqZGtWUkhGSmdzZmtGL2JmNmhRSFA3dFVBQUFBQVNVVk9SSzVDWUlJPSdcclxuXHJcbnZhciByZWN0YW5nbGUgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FZQUFBQnplbnIwQUFBQUNYQklXWE1BQUE3RUFBQU94QUdWS3c0YkFBQUFaVWxFUVZSWXcrM1hzUkdBTUF4RDBSK09NVElJUTdpRUtXazFSQVpoRDJnb2NneGdVOGlWTzcwN1ZXcVNiZ3B2cVF3SFdLZi9Ba1pTN2diMEwyQkV4SkdSTHVrRWR2aEJCUVlZWUlBQkJoaGdnQUVHR0dDQUFXMGFwK1hUclBQT3Bjd3JyK0FCV2dFUUI2ZW9lSTRBQUFBQVNVVk9SSzVDWUlJPSdcclxuXHJcbnZhciB0ZXh0ID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBWUFBQUJ6ZW5yMEFBQUFDWEJJV1hNQUFBN0VBQUFPeEFHVkt3NGJBQUFCQzBsRVFWUll3KzJXTVVyRVFCaUZ2dzBESWEySDJDb1hFTXNRbUdJcWNmVVFDb0pzWitVRlBJQTNXRjI3S1ZLbTJXSWFLN0Z3OXdoaU4xMVliRWFRRUUxbWQ5MXQvZ2ZUL08veHY0K1FnUmtSWkswOUIyYnNSeGZHbUVlQVpFK0Z2MG9BMUIvZWcxTHFWbXY5MFRhc3RVL0FXV3M4TjhaTTJ0bXFxbzZhcHJrRHJtSyt3RnVhcHBkZDViSFNXbjltV1hZTnZNUUF6TXV5YkxZdC8xWlJGR3ZnT1FaZ3VhdnlIMXAxRFVlYmJJcjVCL3AwOEZzZ0FBSWdBQUlnQUFJZ0FBS3dLVUF5Y0xaN2dMcXVFeUR2c1BMZy9SK0FjeTd4M2srQmNZYzk5dDVQblhOUk93YzlTcTIxTjhCSktNNTc0cS9BTzdBd3h0ejM3Vlo5Z2FCajRIUmdOZzluUFNSODhGdndCYWYxUG9rTkpJWHdBQUFBQUVsRlRrU3VRbUNDJ1xyXG5cclxudmFyIGFycm93ID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBWUFBQUJ6ZW5yMEFBQUFDWEJJV1hNQUFBN0VBQUFPeEFHVkt3NGJBQUFBdlVsRVFWUll3KzJXUVE3Q0lCQkZaNGhITUI0S2RpNjhnK25KTk5IVndFMTZpYVpuQURkcWpDV1dBalBFaExkdisvNHJUUXJRNmZ3NzF0cFR5ZldxVkNDRWNDR2ltM1B1MEVUZ3lkRjdQK2JVcUNVQUFMRFBxVkZUSUtzR2g4Q21HbHdDeVRXUWlBS3p4SXU3VXVxc3RaNGtDNnpXa0JRQWlKd055VmZ3ell5SWczU0JCYnRHejMwZlNHbUJHUkVIWTh5MVJZSG9aNGlsZDAwNHhJdlZuM0FYaUs2V0VQaTVtbHRnZFRXWFFQSnFEb0ZOcTZ0UytsUGE2VFRuQVVEZmFlMUtmeWlsQUFBQUFFbEZUa1N1UW1DQydcclxuXHJcblxyXG5jb25zdCBsb2FkR29vZ2xlTWFwcyA9IChjYWxsYmFjaykgPT4ge1xyXG4gICAgY29uc3QgZXhpc3RpbmdTY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNvbG9ycGlja2VyanMnKTtcclxuXHJcbiAgICBpZiAoIWV4aXN0aW5nU2NyaXB0KSB7XHJcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgc2NyaXB0LnNyYyA9ICdodHRwOi8vbm9rb2wubmV0L2Nkbi9hY29sb3JwaWNrZXIuanMnO1xyXG4gICAgICAgIHNjcmlwdC5pZCA9ICdhY29sb3JwaWNrZXJqcyc7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG5cclxuICAgICAgICBzY3JpcHQub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXhpc3RpbmdTY3JpcHQgJiYgY2FsbGJhY2spIGNhbGxiYWNrKCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBjbGVhclNlbGVjdGVkUGFsZXR0ZSgpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N1c2ktcGFsbGV0dGUtaXRlbS1zZWxlY3RlZCcpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3N1c2ktcGFsbGV0dGUtaXRlbS1zZWxlY3RlZCcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdTZWxlY3RlZFBhbGV0dGUoZWxlbWVudCkge1xyXG4gICAgY2xlYXJTZWxlY3RlZFBhbGV0dGUoKVxyXG5cclxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc3VzaS1wYWxsZXR0ZS1pdGVtLXNlbGVjdGVkJykpXHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzdXNpLXBhbGxldHRlLWl0ZW0tc2VsZWN0ZWQnKVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0UGFsZXR0ZSgpIHtcclxuICAgIHBvaW50ZXJQYWxldHRlRWxlbWVudCA9IGFkZFBhbGV0dGVJdGVtKHBvaW50ZXIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZHJhd1NlbGVjdGVkUGFsZXR0ZShlLnRhcmdldClcclxuICAgICAgICBzZXRNb2RlKCdwb2ludGVyJylcclxuICAgIH0sICdzdXNpLXBhbGxldHRlLWl0ZW0tc2VsZWN0ZWQnKVxyXG5cclxuICAgIGFkZFBhbGV0dGVJdGVtKHBlbmNpbCwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBkcmF3U2VsZWN0ZWRQYWxldHRlKGUudGFyZ2V0KVxyXG4gICAgICAgIHNldE1vZGUoJ2JydXNoJylcclxuICAgIH0pXHJcblxyXG4gICAgYWRkUGFsZXR0ZUl0ZW0odGV4dCwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBkcmF3U2VsZWN0ZWRQYWxldHRlKGUudGFyZ2V0KVxyXG4gICAgICAgIHNlbGVjdFRtcEVsZW1lbnQoJ3RleHQnKVxyXG4gICAgfSlcclxuXHJcbiAgICBhZGRQYWxldHRlSXRlbShyZWN0YW5nbGUsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZHJhd1NlbGVjdGVkUGFsZXR0ZShlLnRhcmdldClcclxuICAgICAgICBzZWxlY3RUbXBFbGVtZW50KCdyZWN0JylcclxuICAgIH0pXHJcblxyXG4gICAgYWRkUGFsZXR0ZUl0ZW0oYXJyb3csIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZHJhd1NlbGVjdGVkUGFsZXR0ZShlLnRhcmdldClcclxuICAgICAgICBzZWxlY3RUbXBFbGVtZW50KCdhcnJvdycpXHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0U3Ryb2tlUGFsZXR0ZSgpIHtcclxuICAgIHZhciBicnVzaFNpemUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgYnJ1c2hTaXplLmlkID0gJ2JydXNoU2l6ZSdcclxuICAgIGJydXNoU2l6ZS5jbGFzc0xpc3QuYWRkKCdzdXNpLXBhbGV0dGUtY29sb3InKVxyXG4gICAgYnJ1c2hTaXplLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1MCUnXHJcbiAgICBicnVzaFNpemUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc3Ryb2tlQ29sb3JcclxuXHJcbiAgICB2YXIgcGFsZXR0ZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgcGFsZXR0ZUl0ZW0uY2xhc3NMaXN0LmFkZCgnc3VzaS1wYWxldHRlLWl0ZW0nKVxyXG5cclxuICAgIHZhciBjbGlja2NhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRvZ2dsZVN0cm9rZVBpY2tlcigpXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHN0cm9rZUNIYW5nZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXHJcbiAgICBzdHJva2VDSGFuZ2VyLnR5cGUgPSAncmFuZ2UnXHJcbiAgICBzdHJva2VDSGFuZ2VyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xyXG4gICAgc3Ryb2tlQ0hhbmdlci5zdHlsZS5yaWdodCA9ICc1cHgnXHJcblxyXG4gICAgc3Ryb2tlQ0hhbmdlci5pZCA9ICdzdHJva2VTaXplJ1xyXG4gICAgc3Ryb2tlQ0hhbmdlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICBzdHJva2VDSGFuZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgc2V0U3Ryb2tlU2l6ZShzdHJva2VDSGFuZ2VyLnZhbHVlKVxyXG4gICAgfSlcclxuXHJcbiAgICBwYWxldHRlSXRlbS5hcHBlbmRDaGlsZChicnVzaFNpemUpXHJcbiAgICBwYWxldHRlSXRlbS5hcHBlbmRDaGlsZChzdHJva2VDSGFuZ2VyKVxyXG5cclxuICAgIGJydXNoU2l6ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrY2FsbGJhY2spXHJcbiAgICBicnVzaFNpemUuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGNsaWNrY2FsbGJhY2spXHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1c2ktZ2VuZXJhbCcpLmFwcGVuZENoaWxkKHBhbGV0dGVJdGVtKVxyXG5cclxuICAgIC8vLS0tU3Ryb2tlIGNvbG9yIC0tLS0tXHJcbiAgICB2YXIgc3Ryb2tlQ29sb3JJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIHN0cm9rZUNvbG9ySXRlbS5jbGFzc0xpc3QuYWRkKCdzdXNpLXBhbGV0dGUtaXRlbScpXHJcbiAgICBzdHJva2VDb2xvckl0ZW0uY2xhc3NMaXN0LmFkZCgnc3VzaS1wYWxldHRlLWNvbG9yJylcclxuICAgIHN0cm9rZUNvbG9ySXRlbS5pZCA9ICdjb2xvcidcclxuXHJcbiAgICB2YXIgY2xpY2tjYWxsYmFja0l0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgb3BlblBpY2tlcih0cnVlKVxyXG4gICAgfVxyXG4gICAgc3Ryb2tlQ29sb3JJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tjYWxsYmFja0l0ZW0pXHJcbiAgICBzdHJva2VDb2xvckl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGNsaWNrY2FsbGJhY2tJdGVtKVxyXG4gICAgc3Ryb2tlQ29sb3JJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHN0cm9rZUNvbG9yXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VzaS1nZW5lcmFsJykuYXBwZW5kQ2hpbGQoc3Ryb2tlQ29sb3JJdGVtKVxyXG5cclxuICAgIC8vLS0tb3V0bGluZSBjb2xvciAtLS0tLVxyXG4gICAgdmFyIG91dGxpbmVDb2xvckl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgb3V0bGluZUNvbG9ySXRlbS5jbGFzc0xpc3QuYWRkKCdzdXNpLXBhbGV0dGUtaXRlbScpXHJcbiAgICBvdXRsaW5lQ29sb3JJdGVtLmNsYXNzTGlzdC5hZGQoJ3N1c2ktcGFsZXR0ZS1jb2xvcicpXHJcbiAgICBvdXRsaW5lQ29sb3JJdGVtLmNsYXNzTGlzdC5hZGQoJ3N1c2ktcGFsZXR0ZS1jb2xvck91dGVyJylcclxuICAgIG91dGxpbmVDb2xvckl0ZW0uaWQgPSAnb3V0ZXJDb2xvcidcclxuXHJcbiAgICB2YXIgY2xpY2tjYWxsYmFja091dGxpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgb3BlblBpY2tlcihmYWxzZSlcclxuICAgIH1cclxuICAgIG91dGxpbmVDb2xvckl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja2NhbGxiYWNrT3V0bGluZSlcclxuICAgIG91dGxpbmVDb2xvckl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGNsaWNrY2FsbGJhY2tPdXRsaW5lKVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1c2ktZ2VuZXJhbCcpLmFwcGVuZENoaWxkKG91dGxpbmVDb2xvckl0ZW0pXHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQYWxldHRlSXRlbShpbWdzcmMsIGNsaWNrY2FsbGJhY2ssIHN0eWxlTmFtZSkge1xyXG4gICAgdmFyIGltZ0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAgaW1nRWxlbWVudC5zcmMgPSBpbWdzcmNcclxuXHJcbiAgICB2YXIgcGFsZXR0ZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgcGFsZXR0ZUl0ZW0uY2xhc3NMaXN0LmFkZCgnc3VzaS1wYWxldHRlLWl0ZW0nKVxyXG5cclxuICAgIGlmIChzdHlsZU5hbWUpIHtcclxuICAgICAgICBwYWxldHRlSXRlbS5jbGFzc0xpc3QuYWRkKHN0eWxlTmFtZSlcclxuICAgIH1cclxuXHJcbiAgICBwYWxldHRlSXRlbS5hcHBlbmRDaGlsZChpbWdFbGVtZW50KVxyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWxldHRlJykuYXBwZW5kQ2hpbGQocGFsZXR0ZUl0ZW0pXHJcbiAgICBwYWxldHRlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrY2FsbGJhY2spXHJcbiAgICBwYWxldHRlSXRlbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgY2xpY2tjYWxsYmFjaylcclxuXHJcbiAgICByZXR1cm4gcGFsZXR0ZUl0ZW1cclxufVxyXG5cclxuLy8tLS0tLS0tLS0tLS1cclxudmFyIGlzU3Ryb2tlQ29sb3IgPSB0cnVlXHJcbnZhciBwaWNrZXI7XHJcbnZhciBpc1BpY2tlclZpc2libGU7XHJcbnZhciBpc1N0cm9rZVBpY2tlclZpc2libGUgPSB0cnVlXHJcblxyXG5mdW5jdGlvbiBzZXRTdHJva2VTaXplKHZhbHVlKSB7XHJcbiAgICBicnVzaFNpemUgPSB2YWx1ZVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JydXNoU2l6ZScpLmZpcnN0RWxlbWVudENoaWxkLmlubmVyVGV4dCA9IHZhbHVlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVN0cm9rZVBpY2tlcigpIHtcclxuICAgIGlzU3Ryb2tlUGlja2VyVmlzaWJsZSA9ICFpc1N0cm9rZVBpY2tlclZpc2libGU7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Ryb2tlU2l6ZScpLnN0eWxlLmRpc3BsYXkgPSBpc1N0cm9rZVBpY2tlclZpc2libGUgPyAnYmxvY2snIDogJ25vbmUnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5QaWNrZXIoaXNDb2xvcikge1xyXG4gICAgaXNTdHJva2VDb2xvciA9IGlzQ29sb3I7XHJcbiAgICBjb25zb2xlLmxvZygndG9nZ2xlJyk7XHJcbiAgICBwaWNrZXIudG9nZ2xlKClcclxuICAgIHBpY2tlci5jb2xvciA9IGlzQ29sb3IgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3InKS5zdHlsZS5iYWNrZ3JvdW5kIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dGVyQ29sb3InKS5zdHlsZS5jb2xvclxyXG59XHJcblxyXG5sb2FkR29vZ2xlTWFwcygoKSA9PiB7XHJcblxyXG5cclxuICAgIHBpY2tlciA9IEFDb2xvclBpY2tlci5jcmVhdGVQaWNrZXIoJy5waWNrZXInKVxyXG4gICAgICAgIC5vbignY2hhbmdlJywgKHBpY2tlciwgY29sb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzU3Ryb2tlQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yID0gY29sb3JcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvcicpLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZpbGxDb2xvciA9IGNvbG9yXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0ZXJDb2xvcicpLnN0eWxlLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIHBpY2tlci5oaWRlKClcclxufSlcclxuXHJcbnZhciB3aWR0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aFxyXG52YXIgaGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxudmFyIGlzUGFpbnQgPSBmYWxzZTtcclxudmFyIG1vZGUgPSAnYnJ1c2gnO1xyXG52YXIgbGFzdExpbmU7XHJcbnZhciB4MSwgeTEsIHgyLCB5MjsgLy8gcG9pbnRlciBzZWxlY3Rpb25cclxuXHJcbnZhciBjbGlja2VkVHlwZTtcclxudmFyIGNsaWNrZWRFbGVtZW50O1xyXG52YXIgY2xpY2tlZFRtcERyb3BFbGVtZW50O1xyXG52YXIgdG1wRHJvcEVsZW1lbnQ7XHJcbnZhciB0bXBYLCB0bXBZO1xyXG52YXIgdHJhbnNmb3JtZXI7XHJcbnZhciBkcmFnZ2FibGU7XHJcblxyXG5cclxudmFyIGltYWdlcyA9IFtdXHJcbnZhciBzZWxlY3RlZGltZ1xyXG5cclxudmFyIHN0YWdlID0gbmV3IEtvbnZhLlN0YWdlKHtcclxuICAgIGNvbnRhaW5lcjogJ2NvbnRhaW5lcicsXHJcbiAgICB3aWR0aDogd2lkdGgsXHJcbiAgICBoZWlnaHQ6IGhlaWdodCxcclxufSk7XHJcblxyXG52YXIgbGF5ZXIgPSBuZXcgS29udmEuTGF5ZXIoKTtcclxuc3RhZ2UuYWRkKGxheWVyKTtcclxuXHJcbmltYWdlcy5wdXNoKCdodHRwOi8vbm9rb2wubmV0L2ljb24vZ2lybC1pY29uLnBuZycpO1xyXG5pbWFnZXMucHVzaCgnaHR0cDovL25va29sLm5ldC9pY29uL2tpZC1pY29uLnBuZycpO1xyXG5cclxuaW1hZ2VzLnB1c2goJ2h0dHA6Ly9ub2tvbC5uZXQvaWNvbi9mcmllbmRzLWljb24ucG5nJyk7XHJcbmltYWdlcy5wdXNoKCdodHRwOi8vbm9rb2wubmV0L2ljb24vYm95cy1pY29uLnBuZycpO1xyXG5cclxuc2V0SW1hZ2VJY29ucygpXHJcblxyXG5mdW5jdGlvbiBzZXRJbWFnZUljb25zKCkge1xyXG4gICAgdmFyIGk7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGltZ0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAgICAgIGltZ0VsZW1lbnQuc3JjID0gaW1hZ2VzW2ldXHJcbiAgICAgICAgaW1nRWxlbWVudC5zdHlsZS53aWR0aCA9ICczMnB4J1xyXG4gICAgICAgIGltZ0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RUbXBFbGVtZW50KCdpbWFnZScpXHJcbiAgICAgICAgICAgIHNlbGVjdGVkaW1nID0gZS50YXJnZXQuc3JjXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlcy1jb250YWluZXInKS5hcHBlbmRDaGlsZChpbWdFbGVtZW50KVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRNb2RlKF9tb2RlKSB7XHJcbiAgICBtb2RlID0gX21vZGVcclxuICAgIGRlc2VsZWN0RWxlbWVudCgpXHJcblxyXG4gICAgaWYgKHRyYW5zZm9ybWVyKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXIucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG1vZGUgPT0gJ3BvaW50ZXInKSB7XHJcbiAgICAgICAgZHJhd1NlbGVjdGVkUGFsZXR0ZShwb2ludGVyUGFsZXR0ZUVsZW1lbnQpXHJcbiAgICAgICAgdHJhbnNmb3JtZXIgPSBuZXcgS29udmEuVHJhbnNmb3JtZXIoKTtcclxuICAgICAgICBsYXllci5hZGQodHJhbnNmb3JtZXIpO1xyXG4gICAgICAgIGxheWVyLmJhdGNoRHJhdygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZXNlbGVjdERyYWdnYWJsZSgpIHtcclxuICAgIGlmICghZHJhZ2dhYmxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYWdnYWJsZS5kcmFnZ2FibGUoZmFsc2UpXHJcbiAgICBkcmFnZ2FibGUgPSBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZXNlbGVjdEVsZW1lbnQoKSB7XHJcbiAgICBjbGlja2VkVG1wRHJvcEVsZW1lbnQgPSBudWxsXHJcbiAgICBjbGlja2VkRWxlbWVudCA9IG51bGxcclxufVxyXG5cclxuZnVuY3Rpb24gc2VsZWN0VG1wRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICBjbGlja2VkVG1wRHJvcEVsZW1lbnQgPSBlbGVtZW50XHJcbiAgICBjbGlja2VkRWxlbWVudCA9IGVsZW1lbnRcclxufVxyXG5cclxuZnVuY3Rpb24gZHJvcFRtcEVsZW1lbnQodHlwZSkge1xyXG4gICAgY2xpY2tlZFR5cGUgPSB0eXBlXHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICdpbWFnZScpIHtcclxuICAgICAgICBhZGRJbWFnZShzZWxlY3RlZGltZyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICdyZWN0Jykge1xyXG4gICAgICAgIGRyYXdSZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICdhcnJvdycpIHtcclxuICAgICAgICBkcmF3QXJyb3coKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZSA9PT0gJ3RleHQnKSB7XHJcbiAgICAgICAgZHJhd3RleHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGlja2VkVG1wRHJvcEVsZW1lbnQgPSBudWxsO1xyXG4gICAgbGF5ZXIuZHJhdygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3dGV4dCgpIHtcclxuICAgIHZhciB0ZXh0Tm9kZSA9IG5ldyBLb252YS5UZXh0KHtcclxuICAgICAgICB0ZXh0OiAndCcsXHJcbiAgICAgICAgeDogc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueCxcclxuICAgICAgICB5OiBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKS55LFxyXG4gICAgICAgIGZvbnRTaXplOiAyMCxcclxuICAgICAgICBmaWxsOiBzdHJva2VDb2xvcixcclxuICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxyXG4gICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgbmFtZTogJ3JlY3QnLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGV4dE5vZGUub24oJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyByZXNldCBzY2FsZSwgc28gb25seSB3aXRoIGlzIGNoYW5naW5nIGJ5IHRyYW5zZm9ybWVyXHJcbiAgICAgICAgdGV4dE5vZGUuc2V0QXR0cnMoe1xyXG4gICAgICAgICAgICB3aWR0aDogdGV4dE5vZGUud2lkdGgoKSAqIHRleHROb2RlLnNjYWxlWCgpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRleHROb2RlLmhlaWdodCgpICogdGV4dE5vZGUuc2NhbGVZKCksXHJcbiAgICAgICAgICAgIHNjYWxlWDogMSxcclxuICAgICAgICAgICAgc2NhbGVZOiAxLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2V0TW9kZSgncG9pbnRlcicpXHJcbiAgICBhZGRIYW5kbGVyKHRleHROb2RlKVxyXG4gICAgbGF5ZXIuYWRkKHRleHROb2RlKTtcclxuICAgIGxheWVyLmRyYXcoKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNldFRleHRXcml0ZWFibGUodGV4dE5vZGUpXHJcbiAgICB9LCAyMDApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdSZWN0KCkge1xyXG4gICAgdmFyIHJlY3QyID0gbmV3IEtvbnZhLlJlY3Qoe1xyXG4gICAgICAgIHg6IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLngsXHJcbiAgICAgICAgeTogc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueSxcclxuICAgICAgICB3aWR0aDogMTAsXHJcbiAgICAgICAgaGVpZ2h0OiAxMCxcclxuICAgICAgICBmaWxsOiBzdHJva2VDb2xvcixcclxuICAgICAgICBzdHJva2U6IGZpbGxDb2xvcixcclxuICAgICAgICBuYW1lOiAncmVjdCcsXHJcbiAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRtcERyb3BFbGVtZW50ID0gcmVjdDI7XHJcbiAgICBsYXllci5hZGQocmVjdDIpO1xyXG4gICAgbGF5ZXIuZHJhdygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3QXJyb3coKSB7XHJcbiAgICB2YXIgYXJyb3cgPSBuZXcgS29udmEuQXJyb3coe1xyXG4gICAgICAgIHg6IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLngsXHJcbiAgICAgICAgeTogc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueSxcclxuICAgICAgICBwb2ludHM6IFswLCAwLCAxLCAxXSxcclxuICAgICAgICBwb2ludGVyTGVuZ3RoOiAxMCxcclxuICAgICAgICBwb2ludGVyV2lkdGg6IDEwLFxyXG4gICAgICAgIGZpbGw6IHN0cm9rZUNvbG9yLFxyXG4gICAgICAgIHN0cm9rZTogc3Ryb2tlQ29sb3IsXHJcbiAgICAgICAgc3Ryb2tlV2lkdGg6IGJydXNoU2l6ZSxcclxuICAgICAgICBuYW1lOiAncmVjdCcsXHJcbiAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRtcERyb3BFbGVtZW50ID0gYXJyb3c7XHJcbiAgICBsYXllci5hZGQoYXJyb3cpO1xyXG4gICAgbGF5ZXIuZHJhdygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRJbWFnZShzcmMpIHtcclxuICAgIHZhciBpbWFnZU9iaiA9IG5ldyBJbWFnZSgpO1xyXG4gICAgaW1hZ2VPYmouY3Jvc3NPcmlnaW4gPSAnQW5vbnltb3VzJztcclxuXHJcbiAgICBpbWFnZU9iai5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZHJhd0ltYWdlKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGltYWdlT2JqLnNyYyA9IHNyYztcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1BvaW50ZXJTZWxlY3Rpb24oKSB7XHJcbiAgICB4MSA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLng7XHJcbiAgICB5MSA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLnk7XHJcbiAgICB4MiA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLng7XHJcbiAgICB5MiA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLnk7XHJcblxyXG4gICAgc2VsZWN0aW9uUmVjdGFuZ2xlLnZpc2libGUodHJ1ZSk7XHJcbiAgICBzZWxlY3Rpb25SZWN0YW5nbGUud2lkdGgoMCk7XHJcbiAgICBzZWxlY3Rpb25SZWN0YW5nbGUuaGVpZ2h0KDApO1xyXG4gICAgbGF5ZXIuZHJhdygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3TGluZSgpIHtcclxuICAgIGlzUGFpbnQgPSB0cnVlO1xyXG4gICAgdmFyIHBvcyA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpO1xyXG4gICAgbGFzdExpbmUgPSBuZXcgS29udmEuTGluZSh7XHJcbiAgICAgICAgc3Ryb2tlOiBzdHJva2VDb2xvcixcclxuICAgICAgICBzdHJva2VXaWR0aDogYnJ1c2hTaXplLFxyXG4gICAgICAgIG5hbWU6ICdyZWN0JyxcclxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246ICdzb3VyY2Utb3ZlcicsXHJcbiAgICAgICAgcG9pbnRzOiBbcG9zLngsIHBvcy55XSxcclxuICAgIH0pO1xyXG4gICAgbGF5ZXIuYWRkKGxhc3RMaW5lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd0ltYWdlKGltYWdlT2JqKSB7XHJcbiAgICB2YXIgZGFydGhWYWRlckltZyA9IG5ldyBLb252YS5JbWFnZSh7XHJcbiAgICAgICAgaW1hZ2U6IGltYWdlT2JqLFxyXG4gICAgICAgIHg6IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpLngsXHJcbiAgICAgICAgeTogc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueSxcclxuICAgICAgICB3aWR0aDogMTAsXHJcbiAgICAgICAgaGVpZ2h0OiAxMCxcclxuICAgICAgICBuYW1lOiAncmVjdCcsXHJcbiAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRtcERyb3BFbGVtZW50ID0gZGFydGhWYWRlckltZztcclxuICAgIGxheWVyLmFkZChkYXJ0aFZhZGVySW1nKTtcclxuICAgIGxheWVyLmRyYXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xpY2tPbkVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgc2V0TW9kZSgncG9pbnRlcicpXHJcbiAgICB0cmFuc2Zvcm1lci5ub2RlcyhbZWxlbWVudF0pO1xyXG4gICAgZGVzZWxlY3REcmFnZ2FibGUoKTtcclxuICAgIGVsZW1lbnQuZHJhZ2dhYmxlKHRydWUpO1xyXG4gICAgZHJhZ2dhYmxlID0gZWxlbWVudDtcclxufVxyXG5cclxubGF5ZXIuZHJhdygpO1xyXG5cclxudmFyIHNlbGVjdGlvblJlY3RhbmdsZSA9IG5ldyBLb252YS5SZWN0KHtcclxuICAgIGZpbGw6ICdyZ2JhKDAsMCwyNTUsMC41KScsXHJcbn0pO1xyXG5sYXllci5hZGQoc2VsZWN0aW9uUmVjdGFuZ2xlKTtcclxuXHJcblxyXG5zdGFnZS5vbigna2V5cHJlc3MnLCAoZSkgPT4ge1xyXG4gICAgdmFyIGU7XHJcbiAgICBpZiAoIWUpIGUgPSB3aW5kb3cuZXZlbnQ7XHJcblxyXG4gICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGU7XHJcbiAgICBpZiAoa2V5Q29kZSA9PSAnMjcnKSB7XHJcbiAgICAgICAgLy8gVE9ETyBcclxuICAgIH1cclxufSk7XHJcblxyXG5zdGFnZS5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCAoZSkgPT4ge1xyXG5cclxuICAgIGlmIChjbGlja2VkVG1wRHJvcEVsZW1lbnQpIHtcclxuICAgICAgICB0bXBYID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueDtcclxuICAgICAgICB0bXBZID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCkueTtcclxuICAgICAgICBkcm9wVG1wRWxlbWVudChjbGlja2VkVG1wRHJvcEVsZW1lbnQpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtb2RlID09PSBcImJydXNoXCIpIHtcclxuICAgICAgICBkcmF3TGluZSgpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG1vZGUgPT09IFwicG9pbnRlclwiKSB7XHJcbiAgICAgICAgLy8gZG8gbm90aGluZyBpZiB3ZSBtb3VzZWRvd24gb24gZW55IHNoYXBlXHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ICE9PSBzdGFnZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkcmF3UG9pbnRlclNlbGVjdGlvbigpXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuc3RhZ2Uub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCAoKSA9PiB7XHJcblxyXG4gICAgeDIgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKS54O1xyXG4gICAgeTIgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKS55O1xyXG5cclxuICAgIGlmICh0bXBEcm9wRWxlbWVudCkge1xyXG4gICAgICAgIHZhciBuZXdXaWR0aCA9IHgyIC0gdG1wWFxyXG4gICAgICAgIHZhciBuZXdIZWlnaHQgPSB5MiAtIHRtcFlcclxuXHJcbiAgICAgICAgaWYgKGNsaWNrZWRUeXBlID09PSAnYXJyb3cnKSB7XHJcbiAgICAgICAgICAgIHRtcERyb3BFbGVtZW50LnBvaW50cyhbMCwgMCwgbmV3V2lkdGgsIG5ld0hlaWdodF0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdG1wRHJvcEVsZW1lbnQud2lkdGgobmV3V2lkdGgpXHJcbiAgICAgICAgICAgIHRtcERyb3BFbGVtZW50LmhlaWdodChuZXdIZWlnaHQpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYXllci5iYXRjaERyYXcoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbm8gbm90aGluZyBpZiB3ZSBkaWRuJ3Qgc3RhcnQgc2VsZWN0aW9uXHJcbiAgICBpZiAoIXNlbGVjdGlvblJlY3RhbmdsZS52aXNpYmxlKCkpIHtcclxuXHJcbiAgICAgICAgaWYgKGlzUGFpbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgcG9zID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdQb2ludHMgPSBsYXN0TGluZS5wb2ludHMoKS5jb25jYXQoW3Bvcy54LCBwb3MueV0pO1xyXG4gICAgICAgICAgICBsYXN0TGluZS5wb2ludHMobmV3UG9pbnRzKTtcclxuICAgICAgICAgICAgbGF5ZXIuYmF0Y2hEcmF3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3Rpb25SZWN0YW5nbGUuc2V0QXR0cnMoe1xyXG4gICAgICAgIHg6IE1hdGgubWluKHgxLCB4MiksXHJcbiAgICAgICAgeTogTWF0aC5taW4oeTEsIHkyKSxcclxuICAgICAgICB3aWR0aDogTWF0aC5hYnMoeDIgLSB4MSksXHJcbiAgICAgICAgaGVpZ2h0OiBNYXRoLmFicyh5MiAtIHkxKSxcclxuICAgIH0pO1xyXG4gICAgbGF5ZXIuYmF0Y2hEcmF3KCk7XHJcbn0pO1xyXG5cclxuc3RhZ2Uub24oJ21vdXNldXAgdG91Y2hlbmQnLCAoKSA9PiB7XHJcblxyXG4gICAgaWYgKHRtcERyb3BFbGVtZW50KSB7XHJcbiAgICAgICAgY2xpY2tPbkVsZW1lbnQodG1wRHJvcEVsZW1lbnQpXHJcbiAgICAgICAgdG1wRHJvcEVsZW1lbnQgPSBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgLy8gbm8gbm90aGluZyBpZiB3ZSBkaWRuJ3Qgc3RhcnQgc2VsZWN0aW9uXHJcbiAgICBpZiAoIXNlbGVjdGlvblJlY3RhbmdsZS52aXNpYmxlKCkpIHtcclxuICAgICAgICBpc1BhaW50ID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gdXBkYXRlIHZpc2liaWxpdHkgaW4gdGltZW91dCwgc28gd2UgY2FuIGNoZWNrIGl0IGluIGNsaWNrIGV2ZW50XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBzZWxlY3Rpb25SZWN0YW5nbGUudmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgbGF5ZXIuYmF0Y2hEcmF3KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgc2hhcGVzID0gc3RhZ2UuZmluZCgnLnJlY3QnKS50b0FycmF5KCk7XHJcbiAgICB2YXIgYm94ID0gc2VsZWN0aW9uUmVjdGFuZ2xlLmdldENsaWVudFJlY3QoKTtcclxuICAgIHZhciBzZWxlY3RlZCA9IHNoYXBlcy5maWx0ZXIoKHNoYXBlKSA9PlxyXG4gICAgICAgIEtvbnZhLlV0aWwuaGF2ZUludGVyc2VjdGlvbihib3gsIHNoYXBlLmdldENsaWVudFJlY3QoKSlcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRyYW5zZm9ybWVyKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXIubm9kZXMoc2VsZWN0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGxheWVyLmJhdGNoRHJhdygpO1xyXG59KTtcclxuXHJcbi8vIGNsaWNrcyBzaG91bGQgc2VsZWN0L2Rlc2VsZWN0IHNoYXBzXHJcbnN0YWdlLm9uKCdjbGljayB0YXAnLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgIC8vIGlmIHdlIGFyZSBzZWxlY3Rpbmcgd2l0aCByZWN0LCBkbyBub3RoaW5nXHJcbiAgICBpZiAoc2VsZWN0aW9uUmVjdGFuZ2xlLnZpc2libGUoKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBjbGljayBvbiBlbXB0eSBhcmVhIC0gcmVtb3ZlIGFsbCBzZWxlY3Rpb25zXHJcbiAgICBpZiAoZS50YXJnZXQgPT09IHN0YWdlICYmIHRyYW5zZm9ybWVyKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXIubm9kZXMoW10pO1xyXG4gICAgICAgIGRlc2VsZWN0RHJhZ2dhYmxlKClcclxuICAgICAgICBsYXllci5kcmF3KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRvIG5vdGhpbmcgaWYgY2xpY2tlZCBOT1Qgb24gb3VyIHJlY3RhbmdsZXNcclxuICAgIGlmICghZS50YXJnZXQuaGFzTmFtZSgncmVjdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRvIHdlIHByZXNzZWQgc2hpZnQgb3IgY3RybD9cclxuICAgIGNvbnN0IG1ldGFQcmVzc2VkID0gZS5ldnQuc2hpZnRLZXkgfHwgZS5ldnQuY3RybEtleSB8fCBlLmV2dC5tZXRhS2V5O1xyXG4gICAgY29uc3QgaXNTZWxlY3RlZCA9IHRyYW5zZm9ybWVyICYmIHRyYW5zZm9ybWVyLm5vZGVzKCkgJiYgdHJhbnNmb3JtZXIubm9kZXMoKS5pbmRleE9mKGUudGFyZ2V0KSA+PSAwO1xyXG5cclxuICAgIGlmICghbWV0YVByZXNzZWQgJiYgIWlzU2VsZWN0ZWQgJiYgdHJhbnNmb3JtZXIpIHtcclxuICAgICAgICAvLyBpZiBubyBrZXkgcHJlc3NlZCBhbmQgdGhlIG5vZGUgaXMgbm90IHNlbGVjdGVkXHJcbiAgICAgICAgLy8gc2VsZWN0IGp1c3Qgb25lXHJcblxyXG4gICAgICAgIGNsaWNrT25FbGVtZW50KGUudGFyZ2V0KVxyXG5cclxuICAgIH0gZWxzZSBpZiAobWV0YVByZXNzZWQgJiYgaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIC8vIGlmIHdlIHByZXNzZWQga2V5cyBhbmQgbm9kZSB3YXMgc2VsZWN0ZWRcclxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBmcm9tIHNlbGVjdGlvbjpcclxuICAgICAgICBjb25zdCBub2RlcyA9IHRyYW5zZm9ybWVyLm5vZGVzKCkuc2xpY2UoKTsgLy8gdXNlIHNsaWNlIHRvIGhhdmUgbmV3IGNvcHkgb2YgYXJyYXlcclxuICAgICAgICAvLyByZW1vdmUgbm9kZSBmcm9tIGFycmF5XHJcbiAgICAgICAgbm9kZXMuc3BsaWNlKG5vZGVzLmluZGV4T2YoZS50YXJnZXQpLCAxKTtcclxuICAgICAgICB0cmFuc2Zvcm1lci5ub2Rlcyhub2Rlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGF5ZXIuZHJhdygpO1xyXG59KTtcclxuXHJcbi8vLS0tLS0gVEVYVCAtLS0tLS0tLS1cclxuZnVuY3Rpb24gYWRkSGFuZGxlcih0ZXh0Tm9kZSkge1xyXG4gICAgdGV4dE5vZGUub24oJ2RibGNsaWNrIHRhcCcsICgpID0+IHtcclxuICAgICAgICBzZXRUZXh0V3JpdGVhYmxlKHRleHROb2RlKVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIC0tLS0gVGV4dCB3cml0ZWFibGVcclxuXHJcbmZ1bmN0aW9uIHNldFRleHRXcml0ZWFibGUodGV4dE5vZGUpIHtcclxuICAgIHRleHROb2RlLmhpZGUoKTtcclxuICAgIGxheWVyLmRyYXcoKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgdGV4dGFyZWEgb3ZlciBjYW52YXMgd2l0aCBhYnNvbHV0ZSBwb3NpdGlvblxyXG4gICAgdmFyIHRleHRQb3NpdGlvbiA9IHRleHROb2RlLmFic29sdXRlUG9zaXRpb24oKTtcclxuICAgIHZhciBzdGFnZUJveCA9IHN0YWdlLmNvbnRhaW5lcigpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdmFyIGFyZWFQb3NpdGlvbiA9IHtcclxuICAgICAgICB4OiBzdGFnZUJveC5sZWZ0ICsgdGV4dFBvc2l0aW9uLngsXHJcbiAgICAgICAgeTogc3RhZ2VCb3gudG9wICsgdGV4dFBvc2l0aW9uLnksXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRhcmVhKTtcclxuXHJcbiAgICB0ZXh0YXJlYS52YWx1ZSA9IHRleHROb2RlLnRleHQoKTtcclxuICAgIHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgIHRleHRhcmVhLnN0eWxlLnRvcCA9IGFyZWFQb3NpdGlvbi55ICsgJ3B4JztcclxuICAgIHRleHRhcmVhLnN0eWxlLmxlZnQgPSBhcmVhUG9zaXRpb24ueCArICdweCc7XHJcbiAgICB0ZXh0YXJlYS5zdHlsZS53aWR0aCA9IHRleHROb2RlLndpZHRoKCkgLSB0ZXh0Tm9kZS5wYWRkaW5nKCkgKiAyICsgJ3B4JztcclxuICAgIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9XHJcbiAgICAgICAgdGV4dE5vZGUuaGVpZ2h0KCkgLSB0ZXh0Tm9kZS5wYWRkaW5nKCkgKiAyICsgNSArICdweCc7XHJcbiAgICB0ZXh0YXJlYS5zdHlsZS5mb250U2l6ZSA9IHRleHROb2RlLmZvbnRTaXplKCkgKyAncHgnO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUucGFkZGluZyA9ICcwcHgnO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUubWFyZ2luID0gJzBweCc7XHJcbiAgICB0ZXh0YXJlYS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUuYmFja2dyb3VuZCA9ICdub25lJztcclxuICAgIHRleHRhcmVhLnN0eWxlLnpJbmRleCA9IDI7XHJcbiAgICB0ZXh0YXJlYS5zdHlsZS5vdXRsaW5lID0gJ25vbmUnO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUuY29sb3IgPSBmaWxsQ29sb3I7XHJcbiAgICB0ZXh0YXJlYS5zdHlsZS5yZXNpemUgPSAnbm9uZSc7XHJcbiAgICB0ZXh0YXJlYS5zdHlsZS5saW5lSGVpZ2h0ID0gdGV4dE5vZGUubGluZUhlaWdodCgpO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUuZm9udEZhbWlseSA9IHRleHROb2RlLmZvbnRGYW1pbHkoKTtcclxuICAgIHRleHRhcmVhLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICdsZWZ0IHRvcCc7XHJcbiAgICB0ZXh0YXJlYS5zdHlsZS50ZXh0QWxpZ24gPSB0ZXh0Tm9kZS5hbGlnbigpO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUuY29sb3IgPSB0ZXh0Tm9kZS5maWxsKCk7XHJcbiAgICByb3RhdGlvbiA9IHRleHROb2RlLnJvdGF0aW9uKCk7XHJcbiAgICB2YXIgdHJhbnNmb3JtID0gJyc7XHJcbiAgICBpZiAocm90YXRpb24pIHtcclxuICAgICAgICB0cmFuc2Zvcm0gKz0gJ3JvdGF0ZVooJyArIHJvdGF0aW9uICsgJ2RlZyknO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBweCA9IDA7XHJcbiAgICB2YXIgaXNGaXJlZm94ID1cclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZmlyZWZveCcpID4gLTE7XHJcbiAgICBpZiAoaXNGaXJlZm94KSB7XHJcbiAgICAgICAgcHggKz0gMiArIE1hdGgucm91bmQodGV4dE5vZGUuZm9udFNpemUoKSAvIDIwKTtcclxuICAgIH1cclxuICAgIHRyYW5zZm9ybSArPSAndHJhbnNsYXRlWSgtJyArIHB4ICsgJ3B4KSc7XHJcblxyXG4gICAgdGV4dGFyZWEuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gdGV4dGFyZWEuc2Nyb2xsSGVpZ2h0ICsgMyArICdweCc7XHJcblxyXG4gICAgdGV4dGFyZWEuZm9jdXMoKTtcclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVUZXh0YXJlYSgpIHtcclxuICAgICAgICB0ZXh0YXJlYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRleHRhcmVhKTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVPdXRzaWRlQ2xpY2spO1xyXG4gICAgICAgIHRleHROb2RlLnNob3coKTtcclxuICAgICAgICB0cmFuc2Zvcm1lci5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgICAgIGxheWVyLmRyYXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRUZXh0YXJlYVdpZHRoKG5ld1dpZHRoKSB7XHJcbiAgICAgICAgaWYgKCFuZXdXaWR0aCkge1xyXG4gICAgICAgICAgICAvLyBzZXQgd2lkdGggZm9yIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgIG5ld1dpZHRoID0gdGV4dE5vZGUucGxhY2Vob2xkZXIubGVuZ3RoICogdGV4dE5vZGUuZm9udFNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc29tZSBleHRyYSBmaXhlcyBvbiBkaWZmZXJlbnQgYnJvd3NlcnNcclxuICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KFxyXG4gICAgICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50XHJcbiAgICAgICAgKTtcclxuICAgICAgICB2YXIgaXNGaXJlZm94ID1cclxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2ZpcmVmb3gnKSA+IC0xO1xyXG4gICAgICAgIGlmIChpc1NhZmFyaSB8fCBpc0ZpcmVmb3gpIHtcclxuICAgICAgICAgICAgbmV3V2lkdGggPSBNYXRoLmNlaWwobmV3V2lkdGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGlzRWRnZSA9XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50TW9kZSB8fCAvRWRnZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgICAgICBpZiAoaXNFZGdlKSB7XHJcbiAgICAgICAgICAgIG5ld1dpZHRoICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRleHRhcmVhLnN0eWxlLndpZHRoID0gbmV3V2lkdGggKyAncHgnO1xyXG4gICAgfVxyXG5cclxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vIGhpZGUgb24gZW50ZXJcclxuICAgICAgICAvLyBidXQgZG9uJ3QgaGlkZSBvbiBzaGlmdCArIGVudGVyXHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMgJiYgIWUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgdGV4dE5vZGUudGV4dCh0ZXh0YXJlYS52YWx1ZSk7XHJcbiAgICAgICAgICAgIHJlbW92ZVRleHRhcmVhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIG9uIGVzYyBkbyBub3Qgc2V0IHZhbHVlIGJhY2sgdG8gbm9kZVxyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVRleHRhcmVhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgc2NhbGUgPSB0ZXh0Tm9kZS5nZXRBYnNvbHV0ZVNjYWxlKCkueDtcclxuICAgICAgICBzZXRUZXh0YXJlYVdpZHRoKHRleHROb2RlLndpZHRoKCkgKiBzY2FsZSk7XHJcbiAgICAgICAgdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnNjcm9sbEhlaWdodCArIHRleHROb2RlLmZvbnRTaXplKCkgKyAncHgnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlT3V0c2lkZUNsaWNrKGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQgIT09IHRleHRhcmVhKSB7XHJcbiAgICAgICAgICAgIHRleHROb2RlLnRleHQodGV4dGFyZWEudmFsdWUpO1xyXG4gICAgICAgICAgICByZW1vdmVUZXh0YXJlYSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU91dHNpZGVDbGljayk7XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcblxyXG4iLCIvLyBpbXBvcnQgYC5zY3NzYCBmaWxlc1xyXG5pbXBvcnQgJy4vc2Nzcy9zdHlsZXMuc2Nzcyc7XHJcblxyXG4vLyBpbXBvcnQgVXNlckxpc3QgY2xhc3NcclxuaW1wb3J0IHsgU3VzaURyYXcgYXMgZGVmYXVsdEV4cG9ydCB9IGZyb20gJy4vbGliL3VzZXItbGlzdCc7XHJcblxyXG4vLyBleHBvcnQgZGVmYXVsdCBVc2VyTGlzdCBjbGFzc1xyXG4vLyBJIHVzZWQgYGRlZmF1bHRFeHBvcnRgIHRvIHN0YXRlIHRoYXQgdmFyaWFibGUgbmFtZSBkb2Vzbid0IG1hdHRlclxyXG5leHBvcnQgZGVmYXVsdCBkZWZhdWx0RXhwb3J0OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQWtCQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7QUM5dEJBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")}]).default}));